<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) .NET Foundation and contributors. All rights reserved. Licensed under the Microsoft Reciprocal License. See LICENSE.TXT file in the project root for full license information. -->


<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">  
  <Import Project="..\..\Directory.Build.props" />

  <PropertyGroup>
    <MBAPublishPath>$(OutputPath)examples\publish\</MBAPublishPath>
  </PropertyGroup>

  <ItemGroup>
    <CoreMBAProject Include="WPFCoreMBA\Example.WPFCoreMBA.TrimCopyUsed.csproj">
      <PublishPath>$(MBAPublishPath)Example.WPFCoreMBA.TrimCopyUsed</PublishPath>
    </CoreMBAProject>
    <CoreMBAProject Include="WPFCoreMBA\Example.WPFCoreMBA.TrimLink.csproj">
      <PublishPath>$(MBAPublishPath)Example.WPFCoreMBA.TrimLink</PublishPath>
    </CoreMBAProject>
    <CoreMBAProject Include="WPFCoreMBA\Example.WPFCoreMBA.Untrimmed.csproj">
      <PublishPath>$(MBAPublishPath)Example.WPFCoreMBA.Untrimmed</PublishPath>
    </CoreMBAProject>
    
    <ExampleBundleProject Include="**\*.wixproj" />
  </ItemGroup>

  <Target Name="PublishCoreExamples">
    <Exec Command='dotnet publish -o "%(CoreMBAProject.PublishPath)" -c $(Configuration) --self-contained true "%(CoreMBAProject.Identity)"' />
  </Target>

  <Target Name="Build" DependsOnTargets="PublishCoreExamples">
    <MSBuild Projects="%(ExampleBundleProject.Identity)" />
  </Target>
  
  <Import Project="..\..\Directory.Build.targets" />
</Project>